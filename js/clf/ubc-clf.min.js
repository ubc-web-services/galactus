/*!
 * UBC CLF v7.0.5 Javascript
 * Copyright 2012-2017 The University of British Columbia
 * Contact:     UBC Communications and Marketing
 *              t: 604.822.2130
 *              e: web.admin@ubc.ca
 *              w: communications.ubc.ca
 */
!function(i) {
    i(document).ready(function() {
        n.on_ready(),
        i.ajax({
            url: "https://cdn.ubc.ca/clf/globalutility/index.js",
            dataType: "jsonp",
            jsonpCallback: "clfCallback",
            success: function(n) {
                i("#ubc7-footer-menu").html(n.html.footer),
                i("#ubc7-global-header").html(n.html.header)
            }
        })
    });
    var n = {
        on_ready: function() {
            n.unit_name_resize.dynamic_width(),
            n.unit_name_resize.dynamic_height()
        },
        unit_name_resize: {
            min_unit_bar_height: 50,
            line_height: 17,
            dynamic_width: function() {
                i("#ubc7-unit-identifier").hasClass("shorten") && i("#ubc7-unit-name").width() > i("#ubc7-unit-identifier").width() && (i("#ubc7-unit-identifier").hasClass("shorten-more") ? i("#ubc7-unit-identifier").removeClass("shorten-more") : i("#ubc7-unit-identifier").removeClass("shorten")),
                i("#ubc7-unit-name").width() <= i("#ubc7-unit-identifier").width() && (i("#ubc7-unit-identifier").addClass("shorten"), i("#ubc7-unit-identifier").hasClass("shorten") && i("#ubc7-unit-name").width() <= i("#ubc7-unit-identifier").width() && i("#ubc7-unit-identifier").addClass("shorten-more"))
            },
            dynamic_height: function() {
                if (i("#ubc7-unit .span12").height() < i("#ubc7-unit").height() && (i("#ubc7-unit").css("height", "-=" + n.unit_name_resize.line_height), i("#ubc7-unit").height() <= n.unit_name_resize.min_unit_bar_height && i("#ubc7-unit").css("height", ""), i("#ubc7-unit-identifier").removeClass("multi-rows"), i(".ubc7-single-element a").css("margin-top", "")), i("#ubc7-unit").height() < i("#ubc7-unit .span12").height()) {
                    for (; i("#ubc7-unit").height() < i("#ubc7-unit-name").height();)
                        i("#ubc7-unit").css("height", "+=" + n.unit_name_resize.line_height);
                    i("#ubc7-unit-identifier").addClass("multi-rows"),
                    i(".ubc7-single-element a").css("margin-top", "8px")
                }
            }
        }
    };
    i(window).resize(function() {
        n.on_ready()
    }),
    i(".ubc7-back-to-top a").click(function() {
        i("body").animate({
            scrollTop: 0
        })
    }),
    i("#ubc7-global-menu").on({
        show: function() {
            i("#ubc7-global-utility button span").addClass("opened")
        },
        shown: function() {
            i("#ubc7-search").find("input").focus()
        },
        hide: function() {
            i("#ubc7-global-utility button span").removeClass("opened")
        },
        resize: function() {
            i(this).height() > 0 ? i("#ubc7-global-utility button span").addClass("opened") : i("#ubc7-global-utility button span").removeClass("opened")
        }
    }),
    i(".sidenav .accordion-body").on({
        shown: function() {
            i(this).hasClass("in") && (i(this).closest(".accordion-group").find(".accordion-heading").first().addClass("opened"), i(this).find(".in").closest(".accordion-group").find(".accordion-heading").first().addClass("opened"))
        },
        hidden: function() {
            i(this).hasClass("in") || (target_group = i(this).closest(".accordion-group"), target_group.find(".accordion-heading").removeClass("opened"))
        }
    })
}(jQuery);